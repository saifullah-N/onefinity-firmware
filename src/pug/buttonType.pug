//- doctype html
//- html(lang="en")
//-     head
//-         meta(charset="UTF-8")
//-         meta(http-equiv="X-UA-Compatible", content="IE=edge")
//-         meta(name="viewport", content="width=device-width, initial-scale=1.0")
//-         title button Select
//-     body
//-         div(style="min-height:50vh")
//-             div 
//-                 svg#Capa_1(version='1.1', xmlns='http://www.w3.org/2000/svg', xmlns:xlink='http://www.w3.org/1999/xlink', x='0px', y='0px', viewBox='0 0 100px  100px', style='enable-background:new 0 0 100px  100px;', xml:space='preserve')
//-                     path(d='M293.983,118.572c-0.989-4.833-2.213-9.581-3.659-14.231c-0.362-1.162-0.737-2.319-1.126-3.469\
//-                     c-0.778-2.3-1.612-4.575-2.498-6.823c-0.443-1.124-0.9-2.241-1.369-3.352c-1.409-3.331-2.936-6.6-4.576-9.802\
//-                     c-1.093-2.134-2.237-4.239-3.429-6.312c-5.96-10.365-13.135-19.943-21.331-28.539c-1.639-1.719-3.319-3.399-5.038-5.038\
//-                     c-8.596-8.196-18.174-15.371-28.539-21.331c-2.073-1.192-4.178-2.336-6.312-3.429c-3.202-1.64-6.471-3.167-9.802-4.576\
//-                     c-1.11-0.47-2.228-0.926-3.352-1.369c-2.248-0.886-4.523-1.72-6.823-2.498c-1.15-0.389-2.306-0.765-3.469-1.126\
//-                     c-4.65-1.446-9.398-2.67-14.231-3.659C168.761,1.039,158.752,0,148.5,0s-20.261,1.039-29.928,3.017\
//-                     c-4.833,0.989-9.581,2.213-14.231,3.659c-1.162,0.362-2.319,0.737-3.469,1.126c-2.3,0.778-4.575,1.612-6.823,2.498\
//-                     c-1.124,0.443-2.241,0.9-3.352,1.369c-3.331,1.409-6.6,2.936-9.802,4.576c-2.134,1.093-4.239,2.237-6.312,3.429\
//-                     C64.218,25.635,54.64,32.81,46.044,41.005c-1.719,1.639-3.399,3.319-5.038,5.038C32.81,54.64,25.635,64.218,19.675,74.583\
//-                     c-1.192,2.073-2.336,4.178-3.429,6.312c-1.64,3.202-3.167,6.471-4.576,9.802c-0.47,1.11-0.926,2.228-1.369,3.352\
//-                     c-0.886,2.248-1.72,4.523-2.498,6.823c-0.389,1.15-0.765,2.306-1.126,3.469c-1.446,4.65-2.67,9.398-3.659,14.231\
//-                     C1.039,128.239,0,138.248,0,148.5c0,21.785,4.691,42.474,13.118,61.113c0.991,2.193,2.035,4.357,3.128,6.492\
//-                     c1.64,3.202,3.393,6.336,5.253,9.398c1.24,2.041,2.528,4.05,3.863,6.025c0.667,0.988,1.346,1.967,2.036,2.937\
//-                     c1.38,1.941,2.806,3.847,4.276,5.717c1.47,1.87,2.983,3.704,4.539,5.5c1.556,1.796,3.154,3.555,4.793,5.274\
//-                     c1.639,1.719,3.319,3.399,5.038,5.038c8.596,8.196,18.174,15.371,28.539,21.331c2.073,1.192,4.178,2.335,6.312,3.429\
//-                     c3.202,1.64,6.471,3.167,9.802,4.576c1.11,0.47,2.228,0.926,3.352,1.369c2.248,0.886,4.523,1.72,6.823,2.498\
//-                     c1.15,0.389,2.306,0.765,3.469,1.126c4.65,1.446,9.398,2.67,14.231,3.659c9.667,1.978,19.676,3.017,29.928,3.017\
//-                     s20.261-1.039,29.928-3.017c4.833-0.989,9.581-2.213,14.231-3.659c1.162-0.362,2.319-0.737,3.469-1.126\
//-                     c2.3-0.778,4.575-1.612,6.823-2.498c1.124-0.443,2.241-0.9,3.352-1.369c3.331-1.409,6.6-2.936,9.802-4.576\
//-                     c2.134-1.093,4.239-2.237,6.312-3.429c10.365-5.96,19.943-13.135,28.539-21.331c1.719-1.639,3.399-3.319,5.038-5.038\
//-                     c1.639-1.719,3.237-3.478,4.793-5.274c1.556-1.796,3.07-3.63,4.539-5.5c1.47-1.87,2.895-3.776,4.276-5.717\
//-                     c0.69-0.97,1.369-1.949,2.036-2.937c1.334-1.975,2.622-3.984,3.863-6.025c1.86-3.062,3.613-6.196,5.253-9.398\
//-                     c1.093-2.135,2.136-4.299,3.128-6.492C292.309,190.974,297,170.285,297,148.5C297,138.248,295.961,128.239,293.983,118.572z\
//-                     M134.167,49.538c0-7.698,6.302-13.938,14-13.938s14,6.24,14,13.938v42.095c0,7.698-6.302,13.938-14,13.938s-14-6.24-14-13.938\
//-                     V49.538z M243.486,152.237c-2.609,49.571-43.087,89.358-92.696,91.101c-54.66,1.921-99.868-41.992-99.868-96.236\
//-                     c0-29.416,13.742-55.79,34.349-73.467c8.148-6.99,20.743-1.228,20.743,9.507v0c0,3.708-1.662,7.201-4.485,9.606\
//-                     c-15.281,13.024-25.284,32.549-25.284,54.353c0,39.125,32.05,70.956,71.175,70.956c39.125,0,70.919-31.831,70.919-70.956\
//-                     c0-21.124-8.839-40.118-23.92-53.128c-2.802-2.417-4.45-5.903-4.45-9.603v0c0-10.838,12.8-16.648,20.923-9.473\
//-                     C232.068,93.602,245.105,121.468,243.486,152.237z')
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-                     g
//-             p   Push Button

//-             div
//-                 img(src="/images/on-off.png")
//-                 p   Rock Button
        
//-         div(style='display:flex; justify-content: space-around;')
//-             a(href='/network/', style=' color:white ; background-color:#6F8DF5 ; font-size:20px; font-family:sans-serif ; padding:12px ; border-radius:8%;text-decoration: none;') next
//-             a(href='/home/', style=' color:white ; background-color:#6F8DF5 ; font-size:20px; font-family:sans-serif ;  padding:12px ; border-radius:8%;text-decoration: none;') skip 

doctype html
html(lang="en")
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")

    title Onefinity CNC - Web interface

    style: include ../static/css/pure-min.css
    style: include ../static/css/font-awesome.min.css
    style: include ../static/css/Audiowide.css
    style: include ../static/css/clusterize.css
    style: include ../svelte-components/node_modules/svelte-material-ui/bare.css
    style: include ../../build/http/svelte-components/smui.css
    style: include ../../build/http/svelte-components/style.css
    style: include:stylus ../stylus/style.styl

  body(v-cloak)
    #svelte-dialog-host

    #overlay(v-if="status != 'connected'")
      span {{status}}
    
    #layout
      a#menuLink.menu-link(href="#menu"): span

 
      #main
        .nav-header
          .brand
            img(src="/images/onefinity_logo.png")
            .version
              | v{{config.full_version}}
              a.upgrade-link(v-if="show_upgrade()", href="#admin-general")
                | Upgrade to v{{latestVersion}}
              .fa.fa-exclamation-circle.upgrade-attention(v-if="show_upgrade()")

          .pi-temp-warning
            .fa.fa-thermometer-full(class="error",
              v-if="80 <= state.rpi_temp",
              title="Raspberry Pi temperature too high.")

          .whitespace

          .video(title="Plug camera into USB.\n" +
            "Left click to toggle video size.\n" +
            "Right click to toggle crosshair.", @click="toggle_video",
            @contextmenu="toggle_crosshair", :class="video_size")
            .crosshair(v-if="crosshair")
              .vertical
              .horizontal
              .box
            img(src="/api/video")

          .estop(:class="{active: state.es}")
            estop(@click="estop")

        .content(class="{{currentView}}-view")
          component(:is="currentView + '-view'", :index="index",
            :config="config", :template="template", :state="state", keep-alive)
            
        div(style='display:flex; justify-content: space-around;')
          a(href='/network/', style=' color:white ; background-color:#6F8DF5 ; font-size:20px; font-family:sans-serif ; padding:12px ; border-radius:8%;text-decoration: none;') next
          a(href='/home/', style=' color:white ; background-color:#6F8DF5 ; font-size:20px; font-family:sans-serif ;  padding:12px ; border-radius:8%;text-decoration: none;') skip

    message.error-message(:show.sync="errorShow")
      div(slot="header")
        .estop(:class="{active: state.es}"): estop(@click="estop")
        h3 ERROR: {{errorMessage}}

      div(slot="body")
        console

        button.pure-button(@click="block_error_dialog")
          .fa.fa-ban
          | &nbsp;Stop
        label showing errors for
        input(style="width: 50px", v-model="errorTimeout", number)
        label seconds.

      div(slot="footer")
        button.pure-button.pure-button-primary(@click="errorShow = false") Ok

    message(:show.sync="confirmUpgrade")
      h3(slot="header") Upgrade Firmware?
      div(slot="body")
        p
          | Are you sure you want to upgrade the firmware to version
          | {{latestVersion}}?

      div(slot="footer")
        button.pure-button(@click="confirmUpgrade=false") Cancel
        button.pure-button.pure-button-primary(@click="upgrade_confirmed")
          | Upgrade

    message(:show.sync="confirmUpload")
      h3(slot="header") Upload Firmware?
      div(slot="body")
        p Are you sure you want to upload firmware #[em {{firmwareName}}]?

      div(slot="footer")
        button.pure-button(@click="confirmUpload=false") Cancel
        button.pure-button.pure-button-primary(@click="upload_confirmed")
          | Upload

    message(:show.sync="firmwareUpgrading")
      h3(slot="header") Firmware upgrading
      div(slot="body")
        h3 Please wait...
        p This process should take less than 5 minutes.  If it takes longer than this, please restart the controller and try via USB.
      div(slot="footer")

    message(v-if="popupMessages.length", show=true)
      h3(slot="header") GCode message

      div(slot="body")
        ul
          li(v-for="msg in popupMessages", track-by="$index") {{msg}}

      div(slot="footer")
        button.pure-button.button-success(v-if="state.xx != 'HOLDING'",
          @click="close_messages('ok')") OK

        div(v-if="state.xx == 'HOLDING'")
          button.pure-button(@click="close_messages('stop')")
            | Stop
            .fa.fa-stop

          button.pure-button(@click="close_messages('continue')")
            | Continue
            .fa.fa-play

    #templates: include ../../build/templates.pug
    iframe#download-target(style="display:none")

    script: include ../static/js/vue.js
    script: include ../static/js/sockjs.min.js
    script: include ../static/js/clusterize.min.js
    script: include ../static/js/three.min.js
    script: include:browserify ../js/main.js
    script: include ../../build/http/svelte-components/index.js

                
